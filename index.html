<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Creador de p√°ginas</title>

  <style>
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, sans-serif;
      background: #0f172a;
      color: white;
      margin: 0;
      padding: 16px;
    }
    .contenedor {
      max-width: 600px;
      margin: auto;
    }
    .pantalla { display: none; }
    .pantalla.activa { display: block; }
    input, textarea, button {
      width: 100%;
      margin-top: 12px;
      padding: 12px;
      font-size: 16px;
      border-radius: 10px;
      border: none;
    }
    textarea {
      height: 220px;
      resize: vertical;
    }
    button {
      background: #38bdf8;
      font-weight: bold;
      cursor: pointer;
    }
    .btn-publicar {
      background: #22c55e;
    }
  </style>
</head>
<body>

<div class="contenedor">

  <!-- PANTALLA 1 -->
  <div id="pantalla1" class="pantalla activa">
    <h2>üì± Crea tu p√°gina</h2>
    <input id="nombrePagina" placeholder="Nombre de tu p√°gina">
    <button onclick="entrar()">Entrar</button>
  </div>

  <!-- PANTALLA 2 -->
  <div id="pantalla2" class="pantalla">
    <h2 id="tituloPagina"></h2>
    <textarea id="htmlInput" placeholder="Peg√° tu HTML ac√°..."></textarea>
    <button onclick="verPagina(false)">üëÅ Ver</button>
    <button class="btn-publicar" onclick="verPagina(true)">üöÄ Publicar</button>
  </div>

</div>

<script>
  let nombre = "";

  // Cargar borrador si existe
  window.onload = () => {
    const draftNombre = localStorage.getItem("draft_nombre");
    const draftHtml = localStorage.getItem("draft_html");

    if (draftNombre && draftHtml) {
      nombre = draftNombre;
      nombrePagina.value = draftNombre;
      htmlInput.value = draftHtml;
      tituloPagina.innerText = "Editando: " + nombre;

      pantalla1.classList.remove("activa");
      pantalla2.classList.add("activa");
    }
  };

  function entrar() {
    nombre = nombrePagina.value.trim();
    if (!nombre) return alert("Pon√© un nombre");

    localStorage.setItem("draft_nombre", nombre);

    tituloPagina.innerText = "Editando: " + nombre;
    pantalla1.classList.remove("activa");
    pantalla2.classList.add("activa");
  }

  function verPagina(publicado) {
    localStorage.setItem("draft_html", htmlInput.value);

    if (publicado) {
      localStorage.setItem("page_" + nombre, htmlInput.value);
      location.hash = nombre;
    }

    abrirVista(htmlInput.value, publicado);
  }

  function abrirVista(html, publicado) {
    document.open();
    document.write(`<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>${nombre}</title>
<style>
body { margin:0; font-family:system-ui; }
#barra {
  position:fixed;
  top:10px;
  left:10px;
  display:flex;
  gap:10px;
  z-index:9999;
}
.btn {
  background:black;
  color:white;
  padding:10px 14px;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
}
</style>
</head>
<body>

<div id="barra">
  ${publicado ? "" : `<div class="btn" onclick="location.reload()">‚¨Ö Editor</div>`}
  <div class="btn" onclick="compartir()">üì§ Compartir</div>
</div>

${html}

<script>
function compartir() {
  const url = location.href;
  if (navigator.share) {
    navigator.share({ title: document.title, url });
  } else {
    navigator.clipboard.writeText(url);
    alert("Link copiado");
  }
}
<\/script>

</body>
</html>`);
    document.close();
  }
</script>

</body>
</html>
